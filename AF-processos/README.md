<div class="no-overflow"><p>Essa atividade é dividida em dois exercícios sobre processos.</p>
<h3>Exercício 1</h3>
<p>Você deve escrever um programa em C em que o processo pai crie 2 processos filhos (<span style="font-family: 'courier new', courier, monospace;"><a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/fork.html">fork</a>()</span>).&nbsp;</p>
<p>Para cada processo filho criado, o processo pai deve imprimir "Processo pai criou XXX", onde XXX é o PID do processo criado.</p>
<p>Cada processo filho deve apenas imprimir "Processo filho XXX criado", onde XXX é o PID do processo corrente (use a função&nbsp;<span style="font-family: 'courier new', courier, monospace;"><a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/getpid.html">getpid()</a></span> para isso).</p>
<p>O processo pai (e apenas ele) deve imprimir "Processo pai finalizado!", somente após os filhos terminarem (use a função <span style="font-family: 'courier new', courier, monospace;"><a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/wait.html">wait()</a></span>&nbsp;para aguardar que os filhos terminem de executar).</p>
<h3>Exercício 2</h3>
<p>Você deve escrever um programa C em que:</p>
<ul>
<li>O processo principal crie 2 processos filhos.</li>
<li>Cada um dos processos filhos deve, por sua vez, criar mais três processos.</li>
<li>Cada processo filho (tanto do processo principal quanto dos criados no passo anterior) deve imprimir "Processo XXX, filho de YYY", onde XXX é o PID do processo em questão e YYY o PID do processo que o criou (use as funções <span style="font-family: 'courier new', courier, monospace;"><a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/getpid.html">getpid()</a></span> e <span style="font-family: 'courier new', courier, monospace;"><a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/getppid.html">getppid()</a></span> para isso).</li>
<li>Os processos netos (filhos dos filhos do processo principal) devem, após imprimir esta mensagem, aguardar 5 segundos antes de terminar (use a função <span style="font-family: 'courier new', courier, monospace;"><a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/sleep.html">sleep()</a></span> para isso)&nbsp;</li>
<li>Os processos que criaram filhos devem aguardar que seus filhos terminem de executar (utilize a função <span style="font-family: 'courier new', courier, monospace;"><a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/wait.html">wait()</a></span>).</li>
<li>Todos os processos filhos devem imprimir, ao finalizar, "Processo XXX finalizado", onde XXX é o PID do processo em questão. O processo principal deve imprimir "Processo principal XXX finalizado", onde XXX é o PID do processo principal.</li>
</ul>
<h3>Atenção<span style="color: #ff0000; font-size: large;"><strong></strong></span></h3>
<ul>
<li>Você deve fazer uma chamada da função <span style="font-family: 'courier new', courier, monospace;"><a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/wait.html">wait()</a></span> ou <span style="font-family: 'courier new', courier, monospace;"><a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/wait.html">waitpid()</a></span> para cada processo filho criado. Esta função deve ser chamada somente depois de todos os filhos do processo em questão terem sido criados.&nbsp;</li>
<li><span style="color: #ff0000; font-size: large;"><strong>Você deve garantir que os printfs <span style="text-decoration: underline;">estão como solicitado</span> e na <span style="text-decoration: underline;">ordem</span> solicitada</strong></span>
<ul>
<li>Há uma lista dos <span style="font-family: 'courier new', courier, monospace;">printfs</span> no começo de cada arquivo <span style="font-family: 'courier new', courier, monospace;">.c</span></li>
<li>A função <span style="font-family: courier new, courier, monospace;">printf</span> não imprime imediatamente na saída, mas sim em um <em>buffer</em>. O seu uso em conjunto com <span style="font-family: 'courier new', courier, monospace;">fork()</span> pode <strong>gerar duplicidade de prints na tela</strong>. Para resolver isso, <strong>utilize a função&nbsp;<span style="font-family: 'courier new', courier, monospace;"><a href="https://en.cppreference.com/w/c/io/fflush">fflush(stdio</a>)</span>&nbsp;antes de um novo <span style="font-family: 'courier new', courier, monospace;">fork()</span> sempre que houverem <span style="font-family: 'courier new', courier, monospace;">printfs</span> realizados anteriormente.</strong></li>
</ul>
</li>
</ul>
<h3>Dicas</h3>
<ul>
<li>Perdido com o <span style="font-family: 'courier new', courier, monospace;">fork()</span>? Consulte essa&nbsp;<a href="https://moodle.ufsc.br/mod/resource/view.php?id=4514031">animação aqui</a>.</li>
<li>Há desenhos em ASCII dentro dos arquivos <span style="font-family: 'courier new', courier, monospace;">.c</span> iniciais que complementam a especificação.</li>
<li>A função <span style="font-family: 'courier new', courier, monospace;"><a href="https://en.cppreference.com/w/c/program/exit">exit</a>(&lt;status&gt;)</span> pode ser usada para encerrar um processo em qualquer ponto do código. O uso dessa função <strong>não</strong> é obrigatório.</li>
<li>Para tornar o código mais legível, crie funções separadas para cada tipo de processo filho (uma função para filhos do processo principal, outra função para filhos dos filhos do processo principal).</li>
<li>Você vai precisar das seguintes bibliotecas em seu código:</li>
</ul>
<p style="margin-left: 30px;"><span style="font-family: courier new, courier, monospace;"><span style="color: #993366;"><strong>#include</strong></span> &lt;stdlib.h&gt;</span><br><span style="font-family: courier new, courier, monospace;"><span style="font-family: courier new, courier, monospace;"><span style="color: #993366;"><strong><span style="font-family: courier new, courier, monospace;"><span style="color: #993366;"><strong>#i</strong></span></span>nclude</strong></span></span> &lt;unistd.h&gt;</span><br><span style="font-family: courier new, courier, monospace;"><span style="font-family: courier new, courier, monospace;"><span style="color: #993366;"><strong><span style="font-family: courier new, courier, monospace;"><span style="color: #993366;"><strong>#i</strong></span></span>nclude</strong></span></span> &lt;sys/types.h&gt;</span><br><span style="font-family: courier new, courier, monospace;"><span style="font-family: courier new, courier, monospace;"><span style="color: #993366;"><strong><span style="font-family: courier new, courier, monospace;"><span style="color: #993366;"><strong>#i</strong></span></span>nclude</strong></span></span> &lt;sys/wait.h&gt;</span><br><span style="font-family: courier new, courier, monospace;"><span style="font-family: courier new, courier, monospace;"><span style="color: #993366;"><strong><span style="font-family: courier new, courier, monospace;"><span style="color: #993366;"><strong>#i</strong></span></span>nclude</strong></span></span> &lt;stdio.h&gt;</span><span style="font-family: courier new, courier, monospace;"><span style="font-family: courier new, courier, monospace;"><span style="color: #993366;"><strong><span style="font-family: courier new, courier, monospace;"><span style="color: #993366;"><strong><br></strong></span></span></strong></span></span></span></p>
</div>